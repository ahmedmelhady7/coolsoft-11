#{extends 'Login/index.html' /}
#{set title:'Request Relationship Creation' /}
<html>
    <title>Request Relationship Creation </title>
    <head>
        <meta name="generator" content="HTML Tidy, see www.w3.org">
        <style type="text/css">
            body {
                font-size: 80%;
                font-family: 'Lucida Grande', Verdana, Arial, Sans-Serif;
            }
            
            #showRequest {
                margin-top: 1%;
                margin-right: 5%;
                margin-bottom: 4%;
                margin-left: 0%;
                border-top-left-radius: 10px;
                border-top-right-radius: 10px;
                border-bottom-right-radius: 10px;
                border-bottom-left-radius: 10px;
                background-color: #bbbbbb;
                padding-top: 2%;
                padding-right: 4%;
                padding-bottom: 0%;
                padding-left: 4%;
                position: relative;
                border-bottom-width: 2px;
                border-bottom-style: solid;
                border-bottom-color: #bbbbbb;
                border-right-width: 2px;
                border-right-style: solid;
                border-right-color: #bbbbbb;
                border-left-width: 2px;
                border-left-style: solid;
                border-left-color: #bbbbbb;
                border-top-width: 2px;
                border-top-style: solid;
                border-top-color: #bbbbbb;
                word-wrap: break-word;
            }
        </style>
    </head>
    <div id="pageNoSideBar">
        <div id="pageNoSideBar-bgtop">
        	<div id="backToOrg" ><a href="@{MainEntitys.viewEntity(entity.id)}"> Back to ${entity.name}</a></div>
            <div id="showRequest">
                <body>
                	<div style="background-color:#bbbbbb; border-top-left-radius: 10px;border-top-right-radius: 10px;
				border-bottom-right-radius: 10px; border-bottom-left-radius: 10px; margin-right:5%;padding:2% 2% 2% 2%;">
			   <h2 style="font-family:'Lucida Grande',Verdana,Arial,Sans-Serif; color:#000000">Request Relationship</h2>
				<br />
                <form action="@{CreateRelationshipRequests.createRequest(user.id, source, destination, name, organisation.id, entity.id, 0, 0)}" method="post" onsubmit="return validate()">
               
                </br>
                </br>
                <p>
                Source Entity:
                <select name="source" id="sourceEntity">
                    #{list items: organisation.entitiesList, as:'entity'}
                    #{if (entity.createRelationship == true)}<option>${entity.name}</option>
                    #{/if}
                    #{/list}
                </select>
                </br>
            </p>
            <p>
            Relationship Name:
            <select name="name" id="relationName">
                #{list items: organisation.relationNames, as:'name'}<option>${name}</option>
                #{/list}
            </select>
            </br>
        </p>
        <p>
            Destination Entity:
            <select name="destination" id="destinationEntity">
                #{list items: organisation.entitiesList, as:'entity'}
                #{if (entity.createRelationship == true)}<option>${entity.name}</option>
                #{/if}
                #{/list}
            </select>
        </p>
        <input type="submit" value="Request Creation" class="linkButton" />
        </form>
		</div>
        <script type="text/javascript">
            			        var planFlag = true;
            		        $('#plansLinks').hide();
            		        $('#planLink').click(function(){
            		            if (planFlag) {
            		                $('#plansLinks').show(500);
            		                planFlag = false;
            		            }
            		            else {
            		                $('#plansLinks').hide(500);
            		                planFlag = true;
            		            }
            		        });
            				
            				var relatedItemsFlag = true;
            		        $('#relatedItemsLinks').hide();
            		        $('#relatedItemsLink').click(function(){
            		            if (relatedItemsFlag) {
            		                $('#relatedItemsLinks').show(500);
            		                relatedItemsFlag = false;
            		            }
            		            else {
            		                $('#relatedItemsLinks').hide(500);
            		                relatedItemsFlag = true;
            		            }
            		        });
            				
            				var subentityFlag = true;
            		        $('#subentityLinks').hide();
            		        $('#subentityLink').click(function(){
            		            if (subentityFlag) {
            		                $('#subentityLinks').show(500);
            		                subentityFlag = false;
            		            }
            		            else {
            		                $('#subentityLinks').hide(500);
            		                subentityFlag = true;
            		            }
            		        });
            				
                            var followerFlag = false;
                            $('#followersLinks').hide();
                            $('#followersLink').click(function(){
                                if (followerFlag) {
                                    $('#followersLinks').show(500);
                                    followerFlag = false;
                                }
                                else {
                                    $('#followersLinks').hide(500);
                                    followerFlag = true;
                                }
                            });
        function validate() {
        var src = document.getElementById('sourceEntity').value;
        var dst = document.getElementById('destinationEntity').value;
        if (src == dst) {
        alert("The source and destination should be different");
        return false;
        } else {
        alert("Your request has been sent.");
        }
        }
    </script>
</body>
</div>
</div>
</div>
</html>
