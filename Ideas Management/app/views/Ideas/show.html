#{extends '/ideas/layout.html' /}
<br/>
<input type="submit" value="Back to topic" onclick=location.href="@{Topics.show(topic.id)}">
<br/>
<br/>
<h3>
    <label>
        View idea
    </label>
</h3>
<br/>
<div id="crudShow" class="${type.name}">
    <br/>
    <font color="Red">
        ${message}
    </font>
    <br/>
    
    <div class="objectForm">
    #{if canDelete}
    #{form @delete(object._key())}
		<p class="crudDelete">
			<input type="submit" value="&{'crud.delete', type.modelName}" />
		</p>
	#{/form}
	#{/if}
        #{form action:@show(object._key()), enctype:'multipart/form-data'}
		<br/>
        #{crud.form fields: ['author','belongsToTopic','title','description','isDraft']}
		<br/>
        #{crud.custom 'author'}
        <p>
            <label for="object_creator">
                by
            </label>
            <label disabled= true id="object_creator" cols="30" rows="1" class="" name="object.author">${object.author}</label>
        </p>
        #{/crud.custom }
		<br/>
        <br/>
        #{crud.custom 'belongsToTopic'}
        <p>
            <label for="object_topic">
                Idea belong to topic 
            </label>
            <label disabled= true id="object_creator" cols="30" rows="1" class="" name="object.privacyLevel">${object.belongsToTopic}</label>
        </p>
        #{/crud.custom }
		<br/>
        <br/>
        #{crud.custom 'title'}
        <p>
            <label for="object_title">
                Title
            </label>
            <label disabled= true id="object_title" cols="25" rows="2" class="" name="object.title">${object.title}</label>
        </p>
        #{/crud.custom}
		<br/>
        <br/>
        #{crud.custom 'description'}
        <p>
            <label for="object_description">
                Description
            </label>
            <label disabled= true id="object_description" cols="60" rows="5" class="" name="object.description" required>${object.description}</label>
        </p>
        #{/crud.custom}
		<br/>
        <br/>
        </p>
        <form action="@{Ideas.shareIdea()}">
			<input type="submit" value="Share with user" />
			<input type="hidden" name="ideaId" value="${ideaId}">
			<input type="text" name="userName" id="userName"/>
		</form>
 		<br />
 		Idea rating : ${newRating}
 		<br/>
		<form action="@{Ideas.rate(ideaId, rat)}" method="GET">
			<input type="submit" value="Submit rating"/>
			<input type="hidden" name = "ideaId" value=${ideaId}/>
			<select name="rat">
				<option value="0">0</option>
				<option value="1">1</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5</option>
			</select>
		</form>
		<br />
 		<form action="@{Comments.addCommentToIdea()}" method="GET">
			<input type = "text" name = "comment">
      	 	<input type = "hidden" name = "ideaID" value = ${ideaId} >
			<input type = "submit" value = "Comment" >
		</form>
		<form action = @{Ideas.setPriority()} method = "GET">
		<input type ="submit" value = "Submit Priority"/>
		<br />
		<input type = "radio" name = "priority" value = "critical" checked ="checked"/> critical
		<br />
		<input type = "radio" name = "priority" value = "high"/> high
		<br />
		<input type = "radio" name = "priority" value = "medium"/> medium
		<br />
		<input type = "radio" name = "priority" value = "low"/> low
		<br />
		</form>
        <br />
        <br />
        #{crud.custom 'isDraft'}
        <p>
            <label for="object_description">
                isDraft
            </label>
            <input type="checkbox" checked="${object.isDraft}" id="object_isDraft" class="" name="object.isDraft">is this Idea a draft
            </input><span class="crudHelp">
                <font color="Red">
                    *
                </font>Required
            </span>
        </p>
        #{/crud.custom}
        #{/crud.form }
		<br/>
        #{/form}
    </div>
    <div>
    #{if alreadyReported!=1}
    <form action="@{Users.ReportIdeaAsSpam()}" method="GET" name="myform">
        <input type="hidden" name="ideaId" value="${ideaId}">
            <tr>
                <td>
                    &nbsp;
                </td>
                <td>
                <input type="submit" value="Report As Spam">
            </form>
            #{/if}
	</div>