<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
    <head>
        <meta name="generator" content="HTML Tidy, see www.w3.org">

        <title>Tag Profile View</title>
    </head>

    <body>
        #{extends 'main.html' /}
		#{set title: 'Tag Profile' /}
		#{if follower == true}
			 <form onsubmit="unfollow('${tag.id}');" method="post">
			<p>
			Unfollow ${tag.name} <input type="submit" value="unfollow" />
			</p>	
			</form>
		#{/if} 
		#{if follower == false}
			 <form onsubmit="follow('${tag.id}', '${user.id}');" method="post">
			<p>
			Follow ${tag.name} <input type="submit" value="follow" />
			</p>	
			</form>
		#{/if} 
        <center><big><b>${tag.name}</b></big></center><br><br>
		List of Followers:
		<br>
		#{list items:followers, as:'follower'}
		<li>
			<a href="@{Users.show(follower.id)}">${follower.username}</a>
		</li>
		#{/list}
		<br>
		List of tagged Topics:
		<br>
		#{list items:topics, as:'topic'}
		<li>
			<a href="@{Topics.show(topic.id)}">${topic.title}</a>
		</li>
		#{/list}
		<br>
		List of tagged Organizations:
		<br>
		#{list items:organizations, as:'organization'}
		<li>
			<a href="@{Organizations.viewProfile(organization.id)}">${organization.name}</a>
		</li>
		#{/list}
		<br>
		List of tagged Entities:
		<br>
		#{list items:entities, as:'entity'}
		<li>
			<a href="@{MainEntitys.viewEntity(entity.id)}">${entity.name}</a>
		</li>
		#{/list}
		<br>
		List of tagged Ideas:
		<br>
		#{list items:ideas, as:'idea'}
		<li>
			<a href="@{Ideas.show(idea.id)}">${idea.title}</a>
		</li>
		#{/list}
		<script type="text/javascript">
			function unfollow(id){
		$.post('@{Users.unfollowTag()}', {
			tagId: id
		});
		alert("done!");
		location.reload(true);
	}
	function follow(id, user){
		$.post('@{Users.followTag()}', {
			tagId: id, userId:user
		});
		alert("done!");
		location.reload(true);
	}
		</script>
		
    </body>
</html>

