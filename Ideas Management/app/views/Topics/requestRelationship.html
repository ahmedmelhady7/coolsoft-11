#{extends 'Login/index.html' /}
#{set title:'Request Relationship Creation' /}

<html>
	<title> Request Relationship Creation </title>
	
	<head>
		      <meta name="generator" content="HTML Tidy, see www.w3.org">

		<style type="text/css">body {
			font-size:80%;
			font-family:'Lucida Grande',Verdana,Arial,Sans-Serif;
		}
	#showRequest{
	margin-top: 1%;
	margin-right: 5%;
	margin-bottom: 4%;
	margin-left: 0%;
	border-top-left-radius: 10px;
	border-top-right-radius: 10px;
	border-bottom-right-radius: 10px;
	border-bottom-left-radius: 10px;
	background-color: #bbbbbb;
	padding-top: 2%;
	padding-right: 4%;
	padding-bottom: 0%;
	padding-left: 4%;
	position: relative;
	border-bottom-width: 2px;
	border-bottom-style: solid;
	border-bottom-color: #bbbbbb;
	border-right-width: 2px;
	border-right-style: solid;
	border-right-color: #bbbbbb;
	border-left-width: 2px;
	border-left-style: solid;
	border-left-color: #bbbbbb;
	border-top-width: 2px;
	border-top-style: solid;
	border-top-color: #bbbbbb;
	word-wrap: break-word;
}
</style>
	</head>
	<div id="pageNoSideBar">
    	<div id="pageNoSideBar-bgtop">
    		<div id="backToOrg" ><a href="@{Topics.show(topic.id)}"> Back to ${topic.title}</a></div>
    		<div id="showRequest">
	<body>
			<form action="@{CreateRelationshipRequests.createRequest(user.id, source, destination, name, organisation.id, entity.id, topic.id, 1)}" method="post"
			onsubmit= "return validate()">
				<p>
				<h2 style="font-family:'Lucida Grande',Verdana,Arial,Sans-Serif; color:#000000">Create Relationship</h2>
				<br />
				</p>
				</br>
				</br>
				<p>
				Source Topic:
				<select name="source" id="sourceTopic">
					#{list items: entity.topicList, as:'topic'}
					#{if (topic.createRelationship == true)}
						<option>${topic.title}</option>
					#{/if}
					#{/list}
				</select>
				</br>
				</p>
				<p>
				Relationship Name:
				<select name="name" id="relationName">
					#{list items: organisation.relationNames, as:'name'}
					<option>${name}</option>
					#{/list}
				</select>
				</br>
				</p>
				<p>
				Destination Entity:
				<select name="destination" id="destinationTopic">
					#{list items: entity.topicList, as:'topic'}
					#{if (topic.createRelationship == true)}
						<option>${topic.title}</option>
					#{/if}
					#{/list}
				</select>
				</br>
				</br>
				</p>
				<input type="submit" value="Request Creation" class="linkButton" />
			</form>
			<script type="text/javascript">
			
			function validate() {
				var src = document.getElementById('sourceTopic').value;
				var dst = document.getElementById('destinationTopic').value;
				if (src == dst) {
					alert("The source and destination should be different");
					return false;
				} else {
					alert("Your request has been sent.");
				}
			}
			</script>
	</body>
	</div>
	</div>
	</div>
</html>