<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
    <head>
        <meta name="generator" content="HTML Tidy, see www.w3.org">
        <title>Organization Profile View</title>
    </head>
    <body>
        #{extends 'main.html' /}
        <center><big><b>${org.name}</b></big></center><br><br>

		#{if requestToJoin == true}
		<form action="@{RequestToJoins.requestToJoinOrganization()}" method="post">
			<input type="hidden" id="orgId" name="orgId" value="${org.id}">
			Your message: <textarea id="description" name="description" rows="5" cols="50"></textarea>
			Request to join <input type="submit" value="Request"><br /><br /><br /><br />
		</form>
		#{/if}
        #{else}
        #{if org.createTag}
		<a href="@{Tags.createTag(org.id)}">Create a Tag</a>
        #{/if}
        <select id="selec" onchange="test();">
            <option> Tags</option>
            <option id="e" value="0"> enable </option>
            <option id="d" value="1"> disable </option>
        </select>
        <ul style="list-style: none;">
            #{list items:entities, as:'entity'}
            <li>
                <a href="@{MainEntitys.viewEntity(entity.id)}">${entity.name}</a>
            </li>
            #{/list}
        </ul>
        <a href="@{MainEntitys.goToCreateEntity(org.id)}">Create a new Entity</a>
        <br/>
        <br/>
        <br>
        List of viewable Tags:
        <ul style="list-style: none;">
            #{list items:tags, as:'tag'}
            <li>
                <a href="@{Tags.mainPage(tag.id)}">${tag.name}</a>
            </li>
            #{/list}
        </ul>
        #{/else}
		#{if requestToJoin == false}
        <form action="@{Topics.requestToPost()}">
            <input type="hidden" name="orgId" value="${org.id}">
			
			Request to post: <input type="submit" value="show topics">
        </form>
		#{/if}
        #{if flag == 1}
        <form action="@{BannedUsers.restrictOrganizer()}">
            <input type="hidden" name="orgId" value='${org.id}'>Restrict organizer in this organization: <input type="submit" value="view">
        </form>
        #{/if}
   <!--       
<!--     </body> -->
<!-- </html> -->
<!-- <script type="text/javascript"> -->
<!-- function test(){ -->
	
<!-- 	//var v = document.getElementById('selec').selectedIndex; -->
<!-- 	var a = document.getElementById('selec').value; -->
<!-- 	//alert("function" +  a); -->
<!-- 	if(a!='Tags') -->
<!-- 	if(a == 0){ -->
<!-- 		//alert("function2" +  ${org.id}); -->
<!-- 	$.post('@{Organizations.enableTags()}',{id:${org.id}}); -->
<!-- 		alert("Options is enabled"); -->
<!-- 	} -->
<!-- 	else{ -->
		
<!-- 		//alert("function2" +  ${org.id}); -->
<!-- 	$.post('@{Organizations.disableTags()}',{id:${org.id}}); -->
<!-- 		alert("Options is disabled"); -->
	
<!-- 	} -->

<!-- 	} -->

<!-- </script> -->

<!-- ======= -->  

        <form action="@{Organizations.viewFollowers()}">
            <HR><input type="hidden" name="organizationId" value="${org.id}"><input type="hidden" name="f" value="true">#{if (!org.followers.contains(user))}
            <p>
                Follow ${org.name} <input type="submit" value="Follow">
                <br/>
                #{/if}
                </form>
                <form action="@{Organizations.viewFollowers()}">
                    <input type="hidden" name="organizationId" value="${org.id}"><input type="hidden" name="f" value="false">View ${org.name} Followers <input type="submit" value="Followers">
                    <br/>
                    <HR>
                </form>#{if b == 1}
                <form>
                	Invite an Idea Developer <br>
                    Email: <input type="text" id="email" name="email"/><input type="submit" value="Invite" onclick="s(email, '${org.id}');"/>
                </form>#{/if}
            </body>
            </html>
            <script type="text/javascript">
                function s(e, id){
                    if (validate(e.value)) {
                        $.post('@{sendInvitation()}', {
                            orgId: id,
                            email: e.value
                        });
                        alert("done!");
                        location.reload(true);
                    }
                }
                
                function validate(address){
                    var reg = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
                    if (reg.test(address) == false) {
                        alert('Invalid Email Address');
                    }
                }
            </script>
            <!--
            <script type="text/javascript">
            function test(){
            //var v = document.getElementById('selec').selectedIndex;
            var a = document.getElementById('selec').value;
            //alert("function" +  a);
            if(a!='Tags')
            if(a == 0){
            //alert("function2" +  ${org.id});
            $.post('@{Organizations.enableTags()}',{id:${org.id}});
            alert("Options is enabled");
            }
            else{
            //alert("function2" +  ${org.id});
            $.post('@{Organizations.disableTags()}',{id:${org.id}});
            alert("Options is disabled");
            }
            }
            </script>
            -->

