#{extends 'login/index.html' /}
 #{if type==1}
       <a href="@{Topics.show(id)}">Back to ${name}</a>           
			#{/if}
			#{else}
  <a href="@{Organizations.viewProfile(id)}">Back to ${name}</a>  			
  #{/else}

<br />
<br />
<u><font size ="5" color ="blue"> Requests </font></u>
<br />
<br />
#{if requests.isEmpty()}
<tr><td><i>No new Requests</i></td><td>
#{/if}
#{else}
 #{list items:requests, as:'request'}
    <li>
        <fieldset id="request_${request.id}">
        	        <tr><td><font size ="3" color ="black">
        	#{if type==1}
            	A new user ${request.source.username} Wants to join Topic ${request.topic.title}
			#{/if}
			#{else}
              A new user ${request.source.username} Wants to join Organization ${request.organization.name}
			#{/else}

			<input type = "button" value = "Accept" onclick="javascript: respondGalal(1,${request.id})">
			<input type = "button" value = "Reject" onclick="javascript: respondGalal(0,${request.id})">
        </fieldset>
    </li>
    #{/list}
#{/else}


<script type="text/javascript">
function respondGalal(stat, id){
	if (stat == 1) {
		//alert(stat + "" + id);
		//id = id + 1;
		$.post('@{RequestToJoins.respondToRequest()}',{status:stat,requestId:id},function()
			 {
			// alert("Accepted");
			$('#request_'+id).html('<i>Request has been accepted<\i>');
			});
		//alert("Request Accepted!");
		//window.location.reload();
	}
	else {
		$.post('@{RequestToJoins.respondToRequest()}', {
		status:stat, requestId: id},function()
			 {
			// alert("Accepted");
			$('#request_'+id).html('<i>Request has been rejected<\i>');
			});
		
		//alert("Request rejected!");
		//window.location.reload();	
	}
}


</script>